function startCheck(t){t>checks.length?$("#health-display").append('<p  class="check-item">All Health Checks Passed. Pod is ready for Launch! </p>'):($("#chk"+t+" .status").html("check").css({color:"green"}),console.log($("#chk"+t+".status")),setTimeout(function(){startCheck(t+1)},300))}function loadSVG(t,e){var i=new XMLHttpRequest;i.open("get","img/"+t,!0),i.onreadystatechange=function(){if(4==i.readyState){var t=i.responseXML.documentElement;t=document.importNode(t,!0),$("#"+e).append(t)}},i.send()}function PositionIndicator(t){for(var e in t)this[e]=t[e]}function Slider(t){for(var e in t)this[e]=t[e];var i=this,a="#"+i.id+" .range-value";$("#"+this.id).slider({range:"min",max:i.max,min:i.min,value:0,slide:function(t,e){$(a).val(e.value)}}),$(a).change(function(){$(a).val()<=i.max&&$(a).val()>=i.min&&$("#"+i.id).slider("value",$(a).val())})}function SpeedGauge(t){for(var e in t)this[e]=t[e]}function deg2rad(t){return t*(Math.PI/180)}function rad2deg(t){return t*(180/Math.PI)}function update(t){t.comm_primary?$("#primary-channel").removeClass().addClass("connected"):$("#primary-channel").removeClass(),t.comm_secondary?$("#secondary-channel").removeClass().addClass("connected"):t.comm_secondary,$("#secondary-channel").removeClass(),$("#current-channel").text(t.comm_current),$("#team_id").text(t.team_id),$("#pod-status").text(pod_state[t.status_code]),t.console_entry&&$(".console .display").append('<p class="console-entry">['+t.timestamp+"] "+t.console_entry+"</p>");for(i=0;i<4;i++){var e=$("#b-p"+(i+1));e.find(".temp").text(t.battery_primary_temperature[i]),e.find(".current").text(t.battery_primary_current[i]),e.find(".battery").removeClass().addClass("battery soc--"+t.battery_primary_soc[i])}$("#b-sec").find(".battery").removeClass().addClass("battery soc--"+t.battery_secondary_soc),$("#b-sec").find(".temp").text(t.battery_secondary_temperature),$("#b-sec").find(".current").text(t.battery_secondary_current),$("#b-bk").find(".value").text(t.battery_backup?"ON":"OFF"),$("#temperature").text(t.pod_temperature),$("#pressure").text(t.pressure),p.updateStripCount(t.strip_count),p.updatePosition(t.position),v.setStatValue(t.velocity),a.setStatValue(t.acceleration),yaw.setValueAnimated(t.yaw,.5),pitch.setValueAnimated(t.pitch,.5),roll.setValueAnimated(t.roll,.5);for(var i=0;i<4;i++)$("#lev"+(i+1)).text(t.levitation[i]);$("#brake-pad").text(t.brake_pad),t.pusher&&0!=t.pusher?$(".pusher").text("Engaged").removeClass("disengage").addClass("engage"):$(".pusher").text("Disengaged").removeClass("engage").addClass("disengage")}function sendCommand(t){socket.emit("pod_command",t)}$(".btn1").click(function(){"Stop"==$(this).text()?(sendCommand(),$(this).text("Start"),sendCommand("Pod Start")):($(this).text("Stop"),sendCommand("Pod Stop"))}),$("input:checkbox").change(function(){$(this).is(":checked")?($(this).closest("div").addClass("checked").trigger("switch"),null!=$(this).closest("div").attr("command")&&sendCommand($(this).closest("div").attr("on-command"))):($(this).closest("div").removeClass("checked").trigger("switch"),null!=$(this).closest("div").attr("command")&&sendCommand($(this).closest("div").attr("off-command")))}),$(".controls .switch input#controls-toggle").change(function(){$(".controls .collapsible").collapsible("open",0)}),$(".battery").each(function(t){for(var e=1;e<=4;e++)$(this).append('<div class="bar">')});var Gauge=window.Gauge,yaw=Gauge(document.getElementById("yaw"),{max:360,dialStartAngle:-90,dialEndAngle:-90.001,value:0,label:function(t){return t+String.fromCharCode(176)}}),pitch=Gauge(document.getElementById("pitch"),{max:360,dialStartAngle:-90,dialEndAngle:-90.001,value:0,label:function(t){return t+String.fromCharCode(176)}}),roll=Gauge(document.getElementById("roll"),{max:360,dialStartAngle:-90,dialEndAngle:-90.001,value:0,label:function(t){return t+String.fromCharCode(176)}}),checks=["Computer Mode Operational","Telemetry Stream Active","Emergency brakes - disengaged","UI reading of Pod relay state","Battery packs sufficiently charged.","UI reading of Battery temperature","Brake pads are still at 32 mm","Llevitation module is at 45 mm","Zero acceleration in all axes","Zero velocity in all axes","External pressure is 860Pa","Nominal temperatures","SpaceX Pusher Status - Ready"],html;for(var i in checks)$("#health-display").append('<div class="check-item" id="chk'+i+'"><i class="status material-icons">cached</i><span class="check-item-name">'+checks[i]+"</span></div>");$("#start-check").click(function(){$(".health .collapsible").collapsible("open",0),startCheck(0)}),$("#left-sidebar-control").sideNav({edge:"left",closeOnClick:!1,draggable:!1,onOpen:function(t){},onClose:function(t){}}),$("#right-sidebar-control").sideNav({edge:"right",closeOnClick:!1,draggable:!1,onOpen:function(t){},onClose:function(t){}}),console.log($(window).width()),loadSVG("levitation.svg","levitation-distance"),loadSVG("brake-pad.svg","brake-pad-distance"),PositionIndicator.prototype.init=function(){for(var t='<section class="position-indicator-container"'+this.id+'><div class="position-indicator '+this.id+'"><div class="outer-ring '+this.id+'">',e=0;e<41;e++)t+='<span class="tick '+this.id+'"></span>';t+='</div><div class="details '+this.id+'">',t+='<p class="count-label '+this.id+'">'+this.count_label+' <span class="count"> '+this.count+'</span></p><p class="label '+this.id+'">'+this.label+'</p><p class="value '+this.id+'">'+this.value+'</p><p class="unit '+this.id+'">'+this.unit+"</p></div></section>",$("#"+this.id).append(t),this.addCSS()},PositionIndicator.prototype.addCSS=function(){this.ticks=$(".tick."+this.id),this.details=$(".details."+this.id),this.outerRingRadius=85;var t=this;this.ticks.each(function(e){var i=210-6*e,a=deg2rad(i),s=t.outerRingRadius,n=["translate("+Math.cos(a)*s+"px, "+Math.sin(a)*-s+"px)","rotate("+-i+"deg)"].join(" ");$(this).css({"-webkit-transform":n,"-moz-transform":n,transform:n})}),this.updateStripCount(),this.updatePosition()},PositionIndicator.prototype.updateStripCount=function(t){t&&(this.count=t);var e=this;this.ticks.each(function(t){t+1<=e.count?$(this).css({"border-color":"#fff"}):$(this).css({"border-color":"#3b3d45"})}),this.details.find(".count").text(this.count)},PositionIndicator.prototype.updatePosition=function(t){t&&(this.value=t),this.details.find(".value").text(this.value)};var p=new PositionIndicator({id:"position",label:"Position",unit:"m",value:0,count:0,count_label:"Strip"});p.init();var brakes=new Slider({id:"range1",max:38,min:8}),aux=new Slider({id:"range2",max:50,min:0});SpeedGauge.prototype.initGauge=function(){for(var t='<section class="speedometer-container"'+this.id+'><div class="speedometer '+this.id+'"><div class="inner-ring '+this.id+'"></div><div class="outer-ring '+this.id+'">',e=0;e<49;e++)t+='<span class="tick '+this.id+'"></span>';t+='</div><div class="digit-ring '+this.id+'">';for(e=1;e<=9;e++)t+='<span class="digit '+this.id+'">'+20*(e-1)+"</span>";t+='</div><div class="details '+this.id+'">',t+='<p class="label '+this.id+'">'+this.label+'</p><p class="speed '+this.id+'">'+this.value+'</p><p class="unit '+this.id+'">'+this.unit+'</p></div><div class="guage-progress '+this.id+'"></div></section>',$("#"+this.id).append(t),this.addCSS()},SpeedGauge.prototype.addCSS=function(){this.ticks=$(".tick."+this.id),this.digits=$(".digit."+this.id),this.details=$(".details."+this.id),this.progress=$(".guage-progress."+this.id),this.outerRingRadius=85,this.digitRingRadius=65;var t=this;this.ticks.each(function(e){var i=210-5*e,a=deg2rad(i),s=t.outerRingRadius+(e%6?0:4),n=["translate("+Math.cos(a)*s+"px, "+Math.sin(a)*-s+"px)","rotate("+-i+"deg)"].join(" ");$(this).css({"-webkit-transform":n,"-moz-transform":n,transform:n})}),this.digits.each(function(e){var i=deg2rad(210-30*e),a=Math.cos(i)*t.digitRingRadius,s=Math.sin(i)*-t.digitRingRadius;$(this).css({"-webkit-transform":"translate("+a+"px, "+s+"px)","-moz-transform":"translate("+a+"px, "+s+"px)",transform:"translate("+a+"px, "+s+"px)"})}),this.frameCount=100,this.frameInterval=.3,this.digitValueMax=160,this.statValueMax=this.value,this.statValueCurrent=0,this.statValueInterval=this.statValueMax/this.frameCount,this.updateDetails()},SpeedGauge.prototype.updateDetails=function(){if(!(this.statValueCurrent.toFixed(1)>this.statValueMax)){this.setStatValue(this.statValueCurrent.toFixed(1)),this.statValueCurrent+=this.statValueInterval;var t=this;setTimeout(function(){t.updateDetails()},this.frameInterval)}},SpeedGauge.prototype.setStatValue=function(t){var e=t/this.digitValueMax*240-120;this.progress.css({transform:"rotate("+e+"deg)"}),this.details.find(".speed").text(t)};var v=new SpeedGauge({id:"velocity",label:"Velocity",unit:"m/s",value:.1});v.initGauge();var a=new SpeedGauge({id:"acceleration",label:"Acceleration",unit:"m/s/s",value:.1});a.initGauge();var pod_state=["Pod Running","Pod Stopped"],socket=io.connect();socket.on("connect",function(){console.log("Connected!")}),socket.on("data_send",function(t){update(t)});
//# sourceMappingURL=script.min.js.map
