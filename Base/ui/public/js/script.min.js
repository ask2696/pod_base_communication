function startCheck(t){t>checks.length?$("#health-display").append('<p  class="check-item">All Health Checks Passed. Pod is ready for Launch! </p>'):($("#chk"+t+" .status").html("check").css({color:"green"}),console.log($("#chk"+t+".status")),setTimeout(function(){startCheck(t+1)},300))}function PositionIndicator(t){for(var e in t)this[e]=t[e]}function Slider(t){for(var e in t)this[e]=t[e];var i=this,a="#"+i.id+" .range-value";$("#"+this.id).slider({range:"min",max:i.max,min:i.min,value:0,slide:function(t,e){$(a).val(e.value)}}),$(a).change(function(){$(a).val()<=i.max&&$(a).val()>=i.min&&$("#"+i.id).slider("value",$(a).val())})}function SpeedGauge(t){for(var e in t)this[e]=t[e]}function deg2rad(t){return t*(Math.PI/180)}function rad2deg(t){return t*(180/Math.PI)}function update(t){$("#temperature").text(t.pod_temperature),$("#team_id").text(t.team_id),$("#pressure").text(t.pressure);for(e=0;e<4;e++)$("#battery-current"+(e+1)).text(t.battery_current[e]),$("#batter-temperature"+(e+1)).text(t.battery_temperature[e]);p.updateStripCount(t.stripe_count),p.updatePosition(t.position),v.setStatValue(t.velocity),a.setStatValue(t.acceleration),yaw.setValueAnimated(t.yaw,.5),pitch.setValueAnimated(t.pitch,.5),roll.setValueAnimated(t.roll,.5);for(var e=0;e<4;e++)$("#lev"+(e+1)).text(t.levitation_value[e]);$("#brake-pad").text(t.break_pad_distance),$("#pod-status").text(t.status),0==t.pusher_value?($(".pusher").removeClass("engage"),$(".pusher").addClass("disengage")):($(".pusher").removeClass("disengage"),$(".pusher").addClass("engage"))}function sendCommand(t){socket.emit("pod_command",t)}$(".btn1").click(function(){"Stop"==$(this).text()?(sendCommand(),$(this).text("Start"),sendCommand("Pod Start"),$(this).removeClass("red"),$(this).addClass("teal")):($(this).text("Stop"),sendCommand("Pod Stop"),$(this).removeClass("teal"),$(this).addClass("red"))}),$("input:checkbox").change(function(){$(this).is(":checked")?($(this).closest("div").addClass("checked").trigger("switch"),null!=$(this).closest("div").attr("command")&&sendCommand($(this).closest("div").attr("on-command"))):($(this).closest("div").removeClass("checked").trigger("switch"),null!=$(this).closest("div").attr("command")&&sendCommand($(this).closest("div").attr("off-command")))}),$(".battery").each(function(t){for(var e=1;e<=4;e++)$(this).append('<div class="bar">')});var Gauge=window.Gauge,yaw=Gauge(document.getElementById("yaw"),{max:360,dialStartAngle:-90,dialEndAngle:-90.001,value:100,label:function(t){return t+String.fromCharCode(176)}}),pitch=Gauge(document.getElementById("pitch"),{max:360,dialStartAngle:-90,dialEndAngle:-90.001,value:100,label:function(t){return t+String.fromCharCode(176)}}),roll=Gauge(document.getElementById("roll"),{max:360,dialStartAngle:-90,dialEndAngle:-90.001,value:100,label:function(t){return t+String.fromCharCode(176)}}),checks=["Computer Mode Operational","Telemetry Stream Active","Emergency brakes - disengaged","UI reading of Pod relay state","Battery packs sufficiently charged.","UI reading of Battery temperature","Brake pads are still at 32 mm","Llevitation module is at 45 mm","Zero acceleration in all axes","Zero velocity in all axes","External pressure is 860Pa","Nominal temperatures","SpaceX Pusher Status - Ready"],html;for(var i in checks)$("#health-display").append('<div class="check-item" id="chk'+i+'"><i class="status material-icons">cached</i><span class="check-item-name">'+checks[i]+"</span></div>");$("#start-check").click(function(){$(".health .collapsible").collapsible("open",0),startCheck(0)}),$("#left-sidebar-control").sideNav({menuWidth:300,edge:"left",closeOnClick:!1,draggable:!1,onOpen:function(t){},onClose:function(t){}}),$("#right-sidebar-control").sideNav({menuWidth:300,edge:"right",closeOnClick:!1,draggable:!1,onOpen:function(t){},onClose:function(t){}});var xhr=new XMLHttpRequest;xhr.open("get","img/levitation.svg",!0),xhr.onreadystatechange=function(){if(4==xhr.readyState){var t=xhr.responseXML.documentElement;t=document.importNode(t,!0),$(".levitation").append(t)}},xhr.send();var xhr1=new XMLHttpRequest;xhr1.open("get","img/brake-pad.svg",!0),xhr1.onreadystatechange=function(){if(4==xhr1.readyState){var t=xhr1.responseXML.documentElement;t=document.importNode(t,!0),$(".brakes").append(t)}},xhr1.send(),$(".controls .switch input#controls-toggle").change(function(){$(".controls .collapsible").collapsible("open",0)}),PositionIndicator.prototype.init=function(){for(var t='<section class="position-indicator-container"'+this.id+'><div class="position-indicator '+this.id+'"><div class="outer-ring '+this.id+'">',e=0;e<41;e++)t+='<span class="tick '+this.id+'"></span>';t+='</div><div class="details '+this.id+'">',t+='<p class="count-label '+this.id+'">'+this.count_label+' <span class="count"> '+this.count+'</span></p><p class="label '+this.id+'">'+this.label+'</p><p class="value '+this.id+'">'+this.value+'</p><p class="unit '+this.id+'">'+this.unit+"</p></div></section>",$("#"+this.id).append(t),this.addCSS()},PositionIndicator.prototype.addCSS=function(){this.ticks=$(".tick."+this.id),this.details=$(".details."+this.id),this.outerRingRadius=85;var t=this;this.ticks.each(function(e){var i=210-6*e,a=deg2rad(i),s=t.outerRingRadius,n=["translate("+Math.cos(a)*s+"px, "+Math.sin(a)*-s+"px)","rotate("+-i+"deg)"].join(" ");$(this).css({"-webkit-transform":n,"-moz-transform":n,transform:n})}),this.updateStripCount(),this.updatePosition()},PositionIndicator.prototype.updateStripCount=function(t){t&&(this.count=t);var e=this;this.ticks.each(function(t){t+1<=e.count?$(this).css({"border-color":"#fff"}):$(this).css({"border-color":"#3b3d45"})}),this.details.find(".count").text(this.count)},PositionIndicator.prototype.updatePosition=function(t){t&&(this.value=t),this.details.find(".value").text(this.position)};var p=new PositionIndicator({id:"position",label:"Position",unit:"m",value:0,count:0,count_label:"Strip"});p.init();var brakes=new Slider({id:"range1",max:38,min:8}),aux=new Slider({id:"range2",max:50,min:0});SpeedGauge.prototype.initGauge=function(){for(var t='<section class="speedometer-container"'+this.id+'><div class="speedometer '+this.id+'"><div class="inner-ring '+this.id+'"></div><div class="outer-ring '+this.id+'">',e=0;e<49;e++)t+='<span class="tick '+this.id+'"></span>';t+='</div><div class="digit-ring '+this.id+'">';for(e=0;e<9;e++)t+='<span class="digit '+this.id+'">'+20*(e-1)+"</span>";t+='</div><div class="details '+this.id+'">',t+='<p class="label '+this.id+'">'+this.label+'</p><p class="speed '+this.id+'">'+this.value+'</p><p class="unit '+this.id+'">'+this.unit+'</p></div><div class="guage-progress '+this.id+'"></div></section>',$("#"+this.id).append(t),this.addCSS()},SpeedGauge.prototype.addCSS=function(){this.ticks=$(".tick."+this.id),this.digits=$(".digit."+this.id),this.details=$(".details."+this.id),this.progress=$(".guage-progress."+this.id),this.outerRingRadius=85,this.digitRingRadius=65;var t=this;this.ticks.each(function(e){var i=210-5*e,a=deg2rad(i),s=t.outerRingRadius+(e%6?0:4),n=["translate("+Math.cos(a)*s+"px, "+Math.sin(a)*-s+"px)","rotate("+-i+"deg)"].join(" ");$(this).css({"-webkit-transform":n,"-moz-transform":n,transform:n})}),this.digits.each(function(e){var i=deg2rad(210-30*e),a=Math.cos(i)*t.digitRingRadius,s=Math.sin(i)*-t.digitRingRadius;$(this).css({"-webkit-transform":"translate("+a+"px, "+s+"px)","-moz-transform":"translate("+a+"px, "+s+"px)",transform:"translate("+a+"px, "+s+"px)"})}),this.frameCount=100,this.frameInterval=.3,this.digitValueMax=160,this.statValueMax=this.value,this.statValueCurrent=0,this.statValueInterval=this.statValueMax/this.frameCount,this.updateDetails()},SpeedGauge.prototype.updateDetails=function(){if(!(this.statValueCurrent.toFixed(1)>this.statValueMax)){this.setStatValue(this.statValueCurrent.toFixed(1)),this.statValueCurrent+=this.statValueInterval;var t=this;setTimeout(function(){t.updateDetails()},this.frameInterval)}},SpeedGauge.prototype.setStatValue=function(t){var e=t/this.digitValueMax*240-120;this.progress.css({transform:"rotate("+e+"deg)"}),this.details.find(".speed").text(t)};var v=new SpeedGauge({id:"velocity",label:"Velocity",unit:"m/s",value:160});v.initGauge();var a=new SpeedGauge({id:"acceleration",label:"Acceleration",unit:"m/s/s",value:10});a.initGauge(),window.setInterval(function(){v.statValueCurrent=0,v.statValueMax=100*Math.random(),v.updateDetails()},5e5);var socket=io.connect();socket.on("connect",function(){console.log("Connected!")}),socket.on("data_send",function(t){update(t)});